webswingRequirejs.define(["webswing-util"],function(t){return function(){function u(){if(i==null){var e=t.dpr;r.cfg.rootElement.append('<canvas data-id="canvas" style="display:block; width:'+f()+"px;height:"+l()+'px;" width="'+f()*e+'" height="'+l()*e+'" tabindex="-1"/>'),r.cfg.rootElement.append('<input data-id="input-handler" class="ws-input-hidden" type="text" value="" />'),i=r.cfg.rootElement.find('canvas[data-id="canvas"]'),s=r.cfg.rootElement.find('input[data-id="input-handler"]')}o==null&&(o=setInterval(function(){if(!r.cfg.mirror&&(i.width()!==f()||i.height()!==l())){var t=c().getContext("2d").getImageData(0,0,c().width,c().height),n=f(),s=l();c().width=n*e,c().height=s*e,c().style.width=n+"px",c().style.height=s+"px",c().getContext("2d").putImageData(t,0,0),r.sendHandshake()}},500))}function a(){i!=null&&(i.remove(),s.remove(),i=null,s=null),o!=null&&(clearInterval(o),o=null)}function f(){return r.cfg.rootElement.width()}function l(){return r.cfg.rootElement.height()}function c(){return(i==null||o!=null)&&u(),i[0]}function h(){return s==null&&u(),s[0]}var n=this,r;n.injects=r={cfg:"webswing.config",sendHandshake:"base.handshake"},n.provides={dispose:a,get:c,getInput:h};var i,s,o}});