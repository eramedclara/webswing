(function(e){e(["text!shared/basic/stringMapField.template.html"],function(t){function n(){return{restrict:"E",template:t,scope:{field:"=",value:"=",items:"=",readonly:"=",restricted:"@",label:"@",desc:"@",path:"="},controllerAs:"vm",bindToController:!0,controller:r}}function r(e,t,n){function i(t){n.resolve(r.path,r.field.variables,r.model[t].key).then(function(e){r.resolvedKeyString=e}),n.resolve(r.path,r.variablesType,r.model[t].value).then(function(e){r.resolvedValueString=e}),r.helpVisible[t]=r.helpVisible==null?!0:!r.helpVisible[t],r.helpVisible[t]&&e.$emit("wsHelperOpened",r,t)}function s(){e.$broadcast("wsHelperClose",null,null)}function o(){r.model.push({key:"",value:""})}function u(e){r.model.splice(e,1)}function a(e,t){r.model[e].key=t}var r=this;r.model=[],r.addPair=o,r.deletePair=u,r.helpVisible=[],r.toggleHelper=i,r.toggleHelperClose=s,r.setChoice=a,r.resolvedKeyString="",r.resolvedValueString="",r.value==null&&(r.field.value={}),e.$watch("vm.value",function(e){r.model.splice(0,r.model.length),angular.forEach(e,function(e,t){r.model.push({key:t,value:e})})},!0),e.$watch("vm.model",function(e){var t={},n=!0;for(var i=0;i<e.length;i++)t.hasOwnProperty(e[i].key)?(n=!1,e[i].error="Duplicate keys are not allowed! This field is ignored in output json."):t[e[i].key]=e[i].value;n&&(r.value=t)},!0),e.$on("wsHelperClose",function(e,t,n){for(var i=0;i<r.helpVisible.length;i++)if(r!==t||n!==i)r.helpVisible[i]=!1})}return r.$inject=["$scope","$attrs","configRestService"],n})})(adminConsole.define);